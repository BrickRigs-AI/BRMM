<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Main</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    </head>

<body>
    <div class="sidebar">
        <div class="top_sidebar">
            <img src="./Assets/brmm.png">
            <h2>BRMM</h2>
        </div>
        <div class="card_sidebar" onclick="Page('Home');">
            <img src="./Assets/other_houses_44dp_E8EAED_FILL1_wght700_GRAD200_opsz48.svg">
            <h3>Home</h3>
        </div>
        <div class="card_sidebar" onclick="Page('ModPackList');">
            <img src="./Assets/widgets_44dp_E8EAED_FILL1_wght700_GRAD200_opsz48.svg">
            <h3>My modpacks</h3>
        </div>
        <div class="card_sidebar" onclick="Page('Mods');">
            <img src="./Assets/extension_44dp_E8EAED_FILL1_wght700_GRAD200_opsz20.svg">
            <h3>Mods</h3>
        </div>
        <div class="card_sidebar" onclick="Page('Modpacks_Con');">
            <img src="./Assets/drag_indicator_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg">
            <h3>Modpacks</h3>
        </div>
        <div class="card_sidebar" onclick="logout();">
            <img src="./Assets/logout.svg">
            <h3>Logout</h3>
        </div>
        <div class="bottom_sidebar">
            <div class="UserInfo">
                <img  id="UserPanelImge" src="./Assets/brmm.png">
                <div class="ExtraData">
                    <p id="UserPanelNick">Example nick</p>
                    <h5 id="UserPanelTier">Support tier • none</h5>
                </div>
            </div>
        </div>
    </div>
    <div class="Modpacks" id="CreateModPack">
        <div class="DownloadSteps">
 
        </div>
        <div class="nav_modpacks">
            <h2>New Modpack</h2>
            <div onclick="Page('ModPackList');"><h4>Back</h4></div>
        </div>
        <div class="Modpacks_holder">
            <div class="NewModPack">
                <img src="./Assets/brmm.png">
                <p>Name</p>
                <input placeholder="Name" id="name_modpack_input">
                <p>Imge url</p>
                <input placeholder="Imge url" id="url_modpack_input">
                <button onclick="CreateModPack()">Create</button>
            </div>
        </div>
    </div>
    <div class="Modpacks" id="ModPackSelected">
        <div class="DownloadSteps">
 
        </div>
        <div class="nav_modpacks">
            <h2>Modpacks</h2>
            <div><h4>New Modpack</h4></div>
        </div>
        <div class="Modpacks_holder">
            <div class="Modpack_div">
                <div class="Modpack_div_mod_stats">
                    <img src="./Assets/brmm.png">
                    <div class="ExtraData">
                        <p>Example ModPack</p>
                        <h5>Number of mods • 10</h5>
                    </div>
                </div>
                <div class="delet">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#fff"><path d="M253-99q-36.19 0-64.09-26.91Q161-152.82 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm104-169h74v-398h-74v398Zm173 0h75v-398h-75v398Z"/></svg>
                </div>
            </div>
        </div>
    </div>
    <div class="ModPage" id="UploadModpacks">
        <div class="DownloadSteps">
 
        </div>
        <div class="ModPageGrid" id="Mod_banner_imge_upload_modpack">
            <div class="UpPartMod" style="top: 165px;">
                <div class="Mod_logo_imge" id="Mod_logo_imge_upload_modpack">

                </div>
                <div class="UpPartMod_text_box" style="width: 100%; display: flex;">
                    <div>
                        <h3 id="UploadModpack_text_modname">Example mod</h3>
                        <p id="UploadModpack_text_author">By test user</p>
                    </div>

                </div>
            </div>

        </div>
        <div style="width: 100%; height: 100% ; display: flex;">
            <div style="width: 75%; height: 100%;">
                <h2 style="margin: 0px; text-align: right; margin-right: 1%; margin-top: 10px;">Mods</h2>
                <hr style="border-color: #B993DC; width: 98%;">
                <div style="width: 98%; height: 100%; margin-left: 1%; overflow-y: scroll;" id="Modpacks_Mods_container">

                </div>
            </div>
            <div style="width: 25%; height: 100%;">
                <div class="Side_download_button">
                    <div class="imge_holder" id="imge_holder_modpcak_upload">
                        <div onclick="UploadModpackPageManager(1);" class="Settings_Upload_Modpack">+</div>
                    </div>
                    <h2 style="padding: 0px; margin: 0px; padding-top: 10px; text-align: left; margin-left: 10px;" id="UploadModpack_text_modname_sidebar">Example Mod</h2>
                    <p style="padding: 0px; margin: 0px; font-size: small; color: #CCC; padding-top: 5px; margin-left: 10px; text-align: left;" id="UploadModpack_text_author_sidebar">By </p>
                    <hr style="border-color: #B993DC; width: 95%;">
                    <textarea id="Descryption_modpack_upload" placeholder="Short descryption. . ." style="text-align: left; width: 94%;  font-weight: 500; font-style: normal; height: 65px; resize: none; border: 1px solid #B993DC; font-family: 'Poppins', sans-serif; color: white; background-color: transparent; outline:  none;" value="" maxlength="120"></textarea>
                    <button class="InstallButton">BRMM</button>
                </div>
                <div class="UploadModpacksButton" id="Upload_Button_Modpack"><h4 id="Upload_Button_Modpack_h4_text">Upload</h4></div>
                <div class="UploadModpacksButton" onclick="Page('ModPackList')"><h4>Back</h4></div>
            </div>
        </div>
    </div>
    <div class="Modpacks" id="ModPackList">
        <div class="DownloadSteps">
 
        </div>
        <div class="nav_modpacks">
            <h2>Modpacks</h2>
            <div onclick="Page('CreateModPack')"><h4>New Modpack</h4></div>
        </div>
        <div class="Modpacks_holder" id="Modpack_holder_modpack">

        </div>
    </div>
    <div class="ModPage" id="ModPage">
        <div class="DownloadSteps">
 
        </div>
        <div class="ModPageGrid" id="ModPageGridImge">
            <div class="UpPartMod" style="top: 165px;">
                <div class="Mod_logo_imge" id="logoimge">

                </div>
                <div class="UpPartMod_text_box">
                    <h3 id="ModName">Example mod</h3>
                    <p id="Author">By test user</p>
                </div>
            </div>
        </div>
        <iframe id="iframe" style="outline: none; border: none;" width="100%" height="100%" src="./github.html"></iframe>
    </div>
    <div class="Mods" id="Modpacks_Con">
        <div class="DownloadSteps">
 
        </div>
        <div class="Mods_nav">
            <h1 style="margin-left: 30px;">ModPacks</h1>
            <div class="Navigation_Mods">
                <div class="Navigation_Box">
                    <input id="modSearch" placeholder="ModPack Name">
                    <div class="Dropdown_menu">
                        <select style="padding-left: 10px;    border-top-left-radius: 30px; border-bottom-left-radius: 30px;" id="category" >
                            <option value="All" selected>All</option>
                            <option value="Mod">Mod</option>
                            <option value="Map">Map</option>
                            <option value="Items">Items</option>
                            <option value="Gameplay">Gameplay</option>
                        </select>
                    </div>
                    <button class="Search_button" onclick="Search()">
                        <img src="./Assets/search_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg">
                    </button>
                </div>
            </div>
        </div>
        <div class="ModsHolder" id="ModHolder_Modpacks_Con">

        </div>
    </div>
    <div class="Mods" id="Mods">
        <div class="DownloadSteps">
 
        </div>
        <div class="Mods_nav">
            <h1 style="margin-left: 30px;">Mods</h1>
            <div class="Navigation_Mods">
                <div class="Navigation_Box">
                    <input id="modSearch" placeholder="Mod Name">
                    <div class="Dropdown_menu">
                        <select style="padding-left: 10px;  border-top-left-radius: 30px; border-bottom-left-radius: 30px;" id="category" >
                            <option value="All" selected>All</option>
                            <option value="Mod">Mod</option>
                            <option value="Map">Map</option>
                            <option value="Items">Items</option>
                            <option value="Gameplay">Gameplay</option>
                        </select>
                    </div>
                    <button class="Search_button" onclick="Search()">
                        <img src="./Assets/search_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.svg">
                    </button>
                </div>
            </div>
        </div>
        <div class="ModsHolder" id="ModHolder">

        </div>
    </div>

    <div class="ModPage" id="modpackpage_other">
        <div class="DownloadSteps">
 
        </div>
        <div class="ModPageGrid" id="modpackpage_ModPageGrid">
            <div class="UpPartMod" style="top: 165px;">
                <div class="Mod_logo_imge" id="modpackpage_Mod_logo_imge">

                </div>
                <div class="UpPartMod_text_box" style="width: 100%; display: flex;">
                    <div style="width: 300px;">
                        <h3 style="width: 100%;" id="modpackpage_Name">Example mod</h3>
                        <p id="modpackpage_BY">By test user</p>
                    </div>
                </div>
            </div>
        </div>
        <div style="width: 100%; height: 100% ; display: flex;">
            <div style="width: 75%; height: 100%;">
                <h2 style="margin: 0px; text-align: right; margin-right: 1%; margin-top: 10px;">Mods</h2>
                <hr style="border-color: #B993DC; width: 98%;">
                <div style="width: 98%; height: 100%; margin-left: 1%; overflow-y: scroll;" id="Modpacks_Mods_container2">

                </div>
            </div>
            <div style="width: 25%; height: 100%;">
                <div class="Side_download_button">
                    <div class="imge_holder" id="imge_holder_modpcak_upload_other">
                    </div>
                    <h2 style="padding: 0px; margin: 0px; padding-top: 10px; text-align: left; margin-left: 10px;" id="UploadModpack_text_modname_sidebar_other">Example Mod</h2>
                    <p style="padding: 0px; margin: 0px; font-size: small; color: #CCC; padding-top: 5px; margin-left: 10px; text-align: left;" id="UploadModpack_text_author_sidebar_other">By </p>
                    <hr style="border-color: #B993DC; width: 95%;">
                    <p class="p_mod_mods" id="Descryption_ModpAck_other"></p>
                    <button class="InstallButton" id="InstallButtonmodpack">Install</button>
                </div>
            </div>
        </div>
    </div>

    <div class="Home" id="Home">
        <div class="DownloadSteps">
            
        </div>
        <div class="RestofHome" id="RestofHome_Gallery">
            <img src="./Assets/brmm.png" width="125">
            <h2 id="WelcomeBack">Welcome Back, Test User !</h2>
            <div class="RestHomeButtonHolder_Bottom">
            </div>
        </div>
        <div class="Discord_Banner">
            <div class="Imge_Discord_Banner" id="BannerImge">
                <h2 id="Bannerh1_test">Traffic AI</h2>
                <p id="Bannerp">Mod by Mr mircocontroller</p>
            </div>
        </div>
        <div class="nav_modpacks" style="padding: 10px; margin: 0px;">
            <h2>My Modpacks</h2>
        </div>
        <div class="Home_Modpacks" id="Home_modpack_holder">

        </div>
    </div>
    <div class="Modpacks" id="AddMod">
        <div class="DownloadSteps">
 
        </div>
        <div class="nav_modpacks">
            <h2>Mod Installation</h2>
            <div style="width: 300px; border: none;">
                <div style="width: 110px;" onclick="InstallModToModPack()"><h4 style="width: 110px;">Install</h4></div>
                <div style="width: 50px;" onclick="Page('Mods')"><h4 style="width: 50px;">X</h4></div>
            </div>
        </div>
        <div class="Modpacks_holder" id="Modpack_holder_modpack_mod_installation">

        </div>
    </div>

    <div class="Modpacks" id="ModListModPack">
        <div class="DownloadSteps">
 
        </div>
        <div class="nav_modpacks">
            <h2 id="ModpackNameMods">Modpack name</h2>
            <div style="width: 100px; border: none;">
                <div style="width: 100px;" onclick="Page('ModPackList')"><h4 style="width: 100px;">Back</h4></div>
            </div>
        </div>
        <div class="Modpacks_holder" id="Modpack_holder_modpack_mod_list_of_modpack">

        </div>
    </div>

    <div class="Above_Modpakc_upload" id="Above_Modpakc_upload">
        <h1>Image Settings</h1>
        <input id="ImageLOGOModpackUpload" placeholder="Logo Imge link (leave empty for default image)">
        <input id="ImageBANNERModpackUpload" placeholder="Banner Imge link (leave empty for default image)">
        <button onclick="UploadModpackPageManager(0);">Apply</button>
    </div>

    <div class="lunching_BR" id="lunching_BR">
        <img src="./Assets/brmm.png">
        <h2>Loading mods. . .</h2>
    </div>
</body>
</html>
<style>
    body, html {
    background-color: #110C15;
    margin: 0;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    color: white;
    font-family: "Poppins", sans-serif;
    font-weight: 500;
    font-style: normal;
    text-align: center;
    display: flex;
    overflow: hidden;
}

::-webkit-scrollbar {
  width: 1px;
  height: 1px;
}

::-webkit-scrollbar-track {
  background: transparent; 
}
 
::-webkit-scrollbar-thumb {
  background: #B993DC; 
}

::-webkit-scrollbar-thumb:hover {
  background: #B993DC;
}

.lunching_BR{
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: rgba(13, 9, 15, 0.9);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 1000;
}

.lunching_BR img{
    width: 250px;
}

.Above_Modpakc_upload{
    position: absolute;
    width: 80%;
    height: 100%;
    margin-left: 20%;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.Above_Modpakc_upload input{
    width: 450px;
    height: 40px;
    padding-left: 25px;
    background-color: #110C15;
    border:#B993DC 1px solid;
    outline: none;
    color: white;
    margin-top: 5px;
    transition: all 1s;
}

.Above_Modpakc_upload input:hover{
    border-radius: 5px;
}

.Above_Modpakc_upload button{
    width: 480px;
    height: 40px;
    background-color: #110C15;
    border:#B993DC 1px solid;
    outline: none;
    color: white;
    margin-top: 5px;
}

.Above_Modpakc_upload button:hover{
    border-radius: 5px;
}


.Settings_Upload_Modpack{
    border: 1px solid #B993DC;
    bottom: auto;
    color: rgb(41, 41, 41);
    height: 100%;
    font-family: "Poppins", sans-serif;
    font-weight: 1500;
    font-size: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
}

.Side_download_button{
        margin-top: 5px;
        width: 97%;
        background-color: #110C15;
        border-radius: 5px;
        overflow: hidden;
        border: 1px solid #B993DC;
        margin-left: 1.5%;
    }

    .imge_holder{
        width: 100%;
        height: 150px;
        background-image: url(./Assets/brmm.png);
        background-position: start;
        background-size: cover;
    }

    .InstallButton{
    width: 95%;
    height: 40px;
    background-color: transparent;
    border: 1px solid lime;
    transition: all 1s;
    color: white;
    margin-bottom: 10px;
}

.InstallButton:hover{
    border-color: green;
    border-radius: 5px;
}

.UploadModpacksButton{
    width: 97%;
    height: 35px;
    border: 1px solid transparent;
    margin-top: 10px;
    margin-left: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.8s;
}

.UploadModpacksButton h4{
    padding: 0px;
    margin: 0px;
}

.UploadModpacksButton:hover{
    border: 1px solid #B993DC;
    border-radius: 5px;
}

.MainHolder:hover{
    border: 1px solid #B993DC;
    border-radius: 5px;
    background-color: #110C15;
}

.fixExtraData{
    text-align: left;
}

.NewModPack{
    width: 300px;
    padding: 10px;
    border: solid 1px transparent;
    transition: all 1s;
}

.NewModPack:hover{
    border: solid 1px #B993DC;
    border-radius: 5px;
}

.NewModPack p{
    font-size: large;
    margin-top: 5px;
}

.NewModPack button{
    width: 100%;
    color: white;
    margin-top: 10px;
    height: 50px;
    border: solid 1px lime;
    background-color: transparent;
}

.NewModPack input{
    width: calc(100% - 24px);
    height: 50px;
    background-color: transparent;
    color: white;
    padding-left: 20px;
    margin-top: 5px;
    border: solid 1px #B993DC;
    outline: none;
    font-size: 20px;
}

.NewModPack img{
    width: 300px;
}

.DownloadSteps {
    width: 100%;
    height: 2px;
    background-color: lime;
}

.Install_mod_button{
    margin-top: 5px;
    width: 250px;
    height: 40px;
    border: 1px solid lime;
    background-color: transparent;
    color: white;
    transition: all 1s;
}

.Install_mod_button:hover{
    border-radius: 5px;
}

.Navigation_Box{
    background-color: #0d090f;
    width: 395px; 
    height: 35px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    border-radius: 60px;
    border: 1px solid#B993DC;
}

.Navigation_Mods{
    height: 45px;
    width: 430px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
}

.Navigation_Mods input{
    height: 25px;
    width: 217px;
    outline: none;
    border: none;
    padding-left: 20px;
    border-top-left-radius: 35px;
    border-bottom-left-radius: 35px;
    background-color: #110C15;
    color: white;
}
.Dropdown_menu{
    height: 100%;
    display: flex;
    align-items: center;
}

.Dropdown_menu select{
    height: 25px;
    outline: none;
    border: none;
    background-color: #0d090f;
    border-top: 1px solid #B993DC;
    border-bottom: 1px solid #B993DC;
    border-left: 1px solid #B993DC;
    color: white;
}

.Search_button{
    display: flex;
    justify-content: center;
    align-items: center;
    outline: none;
    border: none;
    height: 25px;
    width: 35px;
    border-top-right-radius: 30px;
    border-bottom-right-radius: 30px;
    background-color: #0d090f;
    border-top: 1px solid #B993DC;
    border-bottom: 1px solid #B993DC;
    border-right: 1px solid #B993DC;
}

.ModPage{
    width: 80%;
    height: 100%;
}

.ModPageGrid{
    width: 100%;
    height: 200px;
    background-image: url("./Assets/image_brmm.png");
    background-size: cover;
    background-position: center;
}

.Mods{
    width: 80%;
    height: 100%;
}

.Mods_nav{
    width: 100%;
    height: 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.ModsHolder{
    width: 100%;
    height: 90%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    overflow: scroll;
}

.Mod{
    width: 560px;
    height: 350px;
    margin: 5px;
    border: 1px solid transparent;
    transition: all 1s;
}

.Mod:hover{
    border: 1px solid #B993DC;
    border-radius: 5px;
    overflow: hidden;
}

.Mod_Background_imge{
    height: 100%;
    width: 100%;
    background-image: url("./Assets/image_brmm.png");
    background-size: 580px;
}

.Mod_logo_imge{
    width: 75px;
    height: 75px;
    background-color: aqua;
    background-image: url("./Assets/brmm.png");
    background-size: cover;
    margin-left: 10px;
    border: 5px solid #110C15;
    border-radius: 5px;
}

.BottomPartMod{
    position: relative;
    display: flex;
    flex-direction: column;
    top: 175px;
    overflow: hidden;
}

.BottomPartMod h3,p{
    margin: 0px;
    padding: 0px;
    text-align: left;
    margin-left: 5px;
    width: 320px;
}

.BottomPartMod a{
    margin: 0px;
    font-size: small;
    padding: 0px;
    text-align: left;
    margin-left: 15px;
    margin-top: 15px;
    color: #CCC;
}

.UpPartMod{
    position: relative;
    display: flex;
    top: 175px;
}

.UpPartMod h3,p{
    margin: 0px;
    padding: 0px;
    text-align: left;
    margin-left: 5px;
}

.UpPartMod_text_box{
    margin-top: 35px;
}

.UpPartMod_text_box p{
    font-size: small;
    color: #CCC;
    width: 100%;
}

.rest_mod{
    height: 100%;
    width: 100%;
    background-image: linear-gradient(transparent 60%, #110C15 40%);
    display: flex;
    flex-direction: column;
}

.delet{
    width: 60px;
    height: 60px;
    margin: 5px;
    background-color: transparent;
    border: 1px solid transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 1s;
}

.delet:hover{
    background-color: #0d090f;
    border-radius: 5px;
    border: 1px solid #B993DC;
}

.Modpack_div{
    width: 90%;
    height: 70px;
    background-color: #110C15;
    border: 1px solid transparent;
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
    transition: all 1s;
}

.Modpack_div:hover{
    background-color: #0d090f;
    border: 1px solid #B993DC;
    border-radius: 5px;
}

.Modpack_div_mod_stats{
    display: flex;
    align-items: center;
}

.Modpack_div img{
    height: 60px;
    border-radius: 5px;
    margin-left: 5px;
    padding-right: 20px;
}

.Discord_Banner{
    width: 95%;
    margin-left: 2.5%;
    height: 150px;
    background-color: #0d090f;
    border: 1px solid #B993DC;
    border-radius: 5px;
    display: flex;
}

.Imge_Discord_Banner{
    background-image: url("./Assets/image_brmm.png");
    background-position: center;
    background-size: cover;
    height: 100%;
    width: 100%;
}

.Imge_Discord_Banner p{
    text-align: center;
    width: 100%;
}

.Discord_Banner_left_top_div{
    height: 45px;
    width: 45px;
    border-radius: 5px;
    border: 1px solid #5865f2;
    background-image: url("https://cdn.discordapp.com/icons/1215607040139853864/49b37295399e2045fbe76acdc53c275d.webp?size=240");
    background-size: cover;
    margin: 10px;
}


.Allholder{
    display: flex;
    align-items: center;
}

.Modpacks_holder{
    width: 100%;
    height: 99%;
    margin-top: 1%;
    display: flex;
    align-items: center;
    flex-direction: column;
    overflow: scroll;
}

.nav_modpacks{
    width: 100%;
    margin-top: 50px;
    display: flex;
    align-items: center;
    justify-content: space-between; 
}

.nav_modpacks div{
    background-color: #110C15;
    width: 200px;
    height: 40px;
    margin-right: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    float: right;
    border: 1px solid transparent;
    transition: all 1s;
}

.nav_modpacks div:hover{
    background-color: #0d090f;
    border-radius: 10px;
    border: 1px solid #B993DC;
}

.nav_modpacks h2{
    text-align: left;
    margin: 0px;
    margin-left: 20px;
}

.Modpacks{
    width: 80%;
}

.Home{
    width: 80%;
    background-color: #110C15;
}

.RestofHome{
    background-color: red;
    height: calc(100% - 480px);
    margin-bottom: 10px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: end;
    background-size: cover;
    background-position: bottom;
    
}

.RestHomeButtonHolder{
    width: 100%;
    height: 65px;
    background-color: aqua;
    display: flex;
    justify-content: space-between;
}

.RestHomeButtonHolder_Bottom{
    width: 100%;
    height: calc(50% - 65px);
    background-image: linear-gradient(transparent , #110C15 70%);
}

.Home_Modpacks{
    height: 260px;
    width: 100%;
    background-color: #110C15;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    overflow: scroll;
}

.Home_Modpacks_card {
    width: 200px;
    height: 250px;
    background-color: #110C15;
    border: 1px solid transparent;
    transition: all 1s;
    position: relative; 
    margin-left: 10px;
}

.Home_Modpacks_card:hover{
    border: 1px solid #B993DC;
    background-color: #0d090f;
}

.CardImge{
    background-image: url("./Assets/brmm.png");
    background-position: center;
    background-size: cover;
    width: 200px;
    height: 150px;
    display: flex;
    justify-content: end;
}

.CardImge div{
    width: 70px;
    height: 30px;
    margin-top: 5px;
    margin-right: 10px;
    background-color: rgba(0, 0, 0, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
}

.Home_Modpacks_card button{
    width: 180px;
    height: 40px;
    opacity: 0;
    outline: none;
    border: none;
    transition: all 3s;
    background-color: transparent;
    color: white;
    border: 1px solid lime;
}



.Home_Modpacks_card h4, .Home_Modpacks_card p {
    margin: 0px;
    text-align: left;
    margin-left: 10px;
    margin-top: 10px;
    transition: all 1s;
    position: relative; 
}

.Home_Modpacks_card p {
    color: #CCC;
}

@keyframes hideAndMove {
    0% {
        opacity: 1;
        position: relative;
    }
    50% {
        opacity: 0;
        position: absolute;
    }
    100% {
        opacity: 0;
        position: absolute;
    }
}

@keyframes TitleText {
    0% {
        opacity: 1;
        position: relative;
    }
    50% {

    }
    100% {
        margin-top: 10px;
        margin-left: 20px;
    }
}

@keyframes ButtonPlay {
    0% {
        opacity: 0;
    }

    100% {
        position: relative;
        margin-top: 15px;
        opacity: 1;
    }
}

.Home_Modpacks_card:hover p {
    animation: hideAndMove 1s forwards; 
}

.Home_Modpacks_card:hover h4 {
    animation: TitleText 1s forwards; 
}

.Home_Modpacks_card:hover button {
    animation: ButtonPlay 1s forwards; 
}

.bottom_sidebar_elements {
    display: flex;
    flex-direction: column;
    align-items: end;
}

.ExtraData h5 {
    margin: 0px;
    color: rgb(148, 148, 148);
}

.ExtraData p {
    margin: 0px;
    width: 100%;
}

.UserInfo {
    width: 90%;
    height: 100%;
    background-color: #110C15;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    border: 1px solid transparent;
    transition: all 1s;
}

.UserInfo:hover {
    border: 1px solid #B993DC;
}

.UserInfo img {
    height: 60px;
    border-radius: 5px;
}

.sidebar {
    width: 20%;
    height: 100%;
    background-color: #0d090f;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.card_sidebar {
    width: 100%;
    background-color: #0d090f;
    margin-top: 10px;
    text-align: left;
    display: flex;
    align-items: center;
    z-index: 100;
    border-right: 1px solid transparent;
    border-top: 1px solid transparent;
    border-bottom: 1px solid transparent;

    transition: all 1s;
}

.card_sidebar:hover{
    background-color: #110C15;
    border-right: 1px solid #B993DC;
    border-top: 1px solid #B993DC;
    border-bottom: 1px solid #B993DC;
}

.card_sidebar h3 {
    margin-left: 20px;
}

.card_sidebar img {
    margin-left: 20px;
}

.bottom_sidebar {
    height: 100px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: auto;
}

.top_sidebar {
    height: 100px;
    width: 50%;
    margin-left: 25%;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
}

.top_sidebar img {
    height: 70px;
}

.p_mod_mods{
    text-align: left;
    margin-left: 15px;
    width: 100%;
    margin-right: 15px;
}

</style>

<script>
const url = window.location.href;
const url_dev_server = "https://service2.brmm.ovh"
let ModPack_Lenght = 0;

window.onmessage = function(e) {
    if (e.data == 'DownloadReq') {
        Page('AddMod');
    }
};

function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

const token = getParameterByName('token', url);

if(token != null){
    localStorage.setItem("Token", token)
}


authenticateUser(localStorage.getItem("Token"));
ModList();
fetchAndDisplayModpacks();
Page("Home");

function logout(){
    localStorage.setItem("Token", "");
    authenticateUser("2");
}

    async function authenticateUser(token) {
        try {
            const response = await fetch(`${url_dev_server}/api/auth`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ token: token })
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const jsonData = await response.json();
            console.log(JSON.stringify(jsonData));
            handleData(jsonData);
        } catch (error) {
            console.error('Error fetching or processing JSON data:', error);
            const newUrl = new URL("login.html", window.location.href);
            window.location.href = newUrl.toString()
        }
    }

    function handleData(modsData) {
        console.log('Mods Data:', modsData);
        const imge = document.getElementById("UserPanelImge");
        const nick = document.getElementById("UserPanelNick");
        const nickback = document.getElementById("WelcomeBack");
        const patreon = document.getElementById("UserPanelTier");

        nickback.textContent = `Welcome Back, ${modsData.username} !` 

        localStorage.setItem("Nick", modsData.username);
        localStorage.setItem("ID", modsData.id);

        imge.src = modsData.avatar;
        nick.textContent = modsData.username;
        patreon.textContent = "Support tier • " + modsData.patreontier;
    }

    async function ModList() {
    try {
        const response = await fetch(`${url_dev_server}/api/get`);
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        const data = await response.json();

        const randomInt = Math.floor(Math.random() * data.length);

        let int = 0;




        data.forEach(mod => {
            int = int + 1;
            createModElement(
                mod.name,
                mod.author_name,
                mod.description,
                mod.downloads,
                mod.github_html_link,
                mod.logo_imge_link,
                mod.big_imge_link,
                mod.version_mod,
                mod.version,
                mod.category,
            );
            console.log(`normal int = ${int} | randomint = ${randomInt} | Data lenght = ${data.length}`);
            if(int == randomInt){

                const banner = document.getElementById("BannerImge").style.backgroundImage = `url('${mod.big_imge_link}')`;;
                const bannerh12 = document.getElementById("Bannerh1_test").textContent = `${mod.name}`;
                const bannerp2 = document.getElementById("Bannerp").textContent = `Mod by ${mod.author_name}`;
            }
        });
    } catch (error) {
        console.error('There was a problem with the fetch operation:', error);
    }
}
async function fetchAndDisplayModpacks() {
    try {
        const response = await fetch(`${url_dev_server}/api/get/modpacks`);
        const modpacks = await response.json();

        modpacks.forEach(modpack => {
            createModpackElement(modpack)
        });
    } catch (error) {
        console.error('Error fetching modpacks:', error);
    }
}

function createModpackElement(modpack) {
    const jsonObject = JSON.parse(modpack.json);


    const modDiv = document.createElement('div');
    modDiv.className = 'Mod';
    modDiv.id = "Mod_ModPage";
    modDiv.setAttribute('data-version', modpack.version);
    modDiv.setAttribute('data-category', "Modpack");  
    modDiv.setAttribute('data-modName', modpack.author);  

    const backgroundDiv = document.createElement('div');
    backgroundDiv.className = 'Mod_Background_imge';

    backgroundDiv.style.backgroundImage = `url(${modpack.banner})`;
    modDiv.appendChild(backgroundDiv);

    const restModDiv = document.createElement('div');
    restModDiv.className = 'rest_mod';
    restModDiv.onclick = function() {
        LoadModpackPage(modpack,jsonObject);
        //ModPage(RawHtmlLink,modName,modAuthor,LogoImge,BigImge,mod_version);
    };
    backgroundDiv.appendChild(restModDiv);

    const upPartDiv = document.createElement('div');
    upPartDiv.className = 'UpPartMod';
    restModDiv.appendChild(upPartDiv);

    const logoDiv = document.createElement('div');
    logoDiv.className = 'Mod_logo_imge';
    logoDiv.style.backgroundImage = `url(${modpack.logo})`;
    upPartDiv.appendChild(logoDiv);

    const textBoxDiv = document.createElement('div');
    textBoxDiv.className = 'UpPartMod_text_box';
    upPartDiv.appendChild(textBoxDiv);

    const modNameH3 = document.createElement('h3');
    modNameH3.textContent = modpack.author;
    textBoxDiv.appendChild(modNameH3);

    const modAuthorP = document.createElement('p');
    modAuthorP.textContent = `By ${jsonObject.Author}`;
    textBoxDiv.appendChild(modAuthorP);

    const bottomPartDiv = document.createElement('div');
    bottomPartDiv.className = 'BottomPartMod';
    restModDiv.appendChild(bottomPartDiv);

    const modDescriptionP = document.createElement('p');
    const modbreak = document.createElement('br');
    modDescriptionP.className = 'p_mod_mods';

    bottomPartDiv.appendChild(modDescriptionP);
    if (modpack.description.length > 100) {
        modDescriptionP.textContent =  modpack.description.substring(0, 100) + "...";
    }
    else if (modpack.description.length <= 48) {
        modDescriptionP.textContent =  modpack.description;
        bottomPartDiv.appendChild(modbreak);
    }
    else{
        modDescriptionP.textContent =  modpack.description;
    }

    const modDownloadsA = document.createElement('a');
    modDownloadsA.textContent = `${modpack.downloads} • Downloads • ${modpack.version} • Version • ModPack`;
    bottomPartDiv.appendChild(modDownloadsA);

    const modHolder = document.getElementById('ModHolder_Modpacks_Con');
    if (modHolder) {
        modHolder.appendChild(modDiv);
    } else {
        console.error("ModHolder element not found");
    }
}

function LoadModpackPage(modpack, jsonObject){
    const Modpacks_Mods_container = document.getElementById("Modpacks_Mods_container2");

    const modpackpage_ModPageGrid = document.getElementById("modpackpage_ModPageGrid");
    const modpackpage_Name = document.getElementById("modpackpage_Name");
    const modpackpage_BY = document.getElementById("modpackpage_BY");
    const imge_holder_modpcak_upload = document.getElementById("imge_holder_modpcak_upload_other");
    const modpackpage_Mod_logo_imge = document.getElementById("modpackpage_Mod_logo_imge");
    const UploadModpack_text_modname_sidebar = document.getElementById("UploadModpack_text_modname_sidebar_other");
    const UploadModpack_text_author_sidebar = document.getElementById("UploadModpack_text_author_sidebar_other");
    const Descryption_ModpAck_other = document.getElementById("Descryption_ModpAck_other");
    const InstallButtonmodpack = document.getElementById("InstallButtonmodpack");
    InstallButtonmodpack.onclick = function() {
        DownloadModpack(modpack,jsonObject);
    };

    Descryption_ModpAck_other.textContent = modpack.description;
    Descryption_ModpAck_other.style.marginBottom = "10px"
    UploadModpack_text_modname_sidebar.textContent = `${jsonObject.Name}`
    UploadModpack_text_author_sidebar.textContent = `By ${jsonObject.Author}`

    imge_holder_modpcak_upload.style.backgroundImage = `url(${modpack.banner})`

    modpackpage_Mod_logo_imge.style.backgroundImage = `url(${modpack.logo})`
    modpackpage_ModPageGrid.style.backgroundImage = `url(${modpack.banner})`
    modpackpage_Name.textContent = `${jsonObject.Name}`
    modpackpage_BY.textContent = `By ${jsonObject.Author}`

    Modpacks_Mods_container.innerHTML = "";
    jsonObject.Mods.forEach(mod => {
        const Modpack_div = document.createElement('div');
        Modpack_div.className = 'Modpack_div';
        Modpack_div.style.width = "calc(100% - 2px)";

        const modpackDiv = document.createElement('div');
        modpackDiv.className = 'Modpack_div_mod_stats';
        const imgElement = document.createElement('img');
        imgElement.src = mod.Imge;
        imgElement.style.width = '60px';
        const extraDataDiv = document.createElement('div');
        extraDataDiv.className = 'ExtraData';
        const pElement = document.createElement('p');
        pElement.textContent = mod.Name;
        const h5Element = document.createElement('h5');
        h5Element.style.textAlign = 'left';
        h5Element.textContent = `By ${mod.Author}`;
        extraDataDiv.appendChild(pElement);
        extraDataDiv.appendChild(h5Element);
        modpackDiv.appendChild(imgElement);
        modpackDiv.appendChild(extraDataDiv);
        Modpack_div.appendChild(modpackDiv);
        Modpacks_Mods_container.appendChild(Modpack_div);
    });
    Page("modpackpage_other");
}

function DownloadModpack(modpack,jsonObject){
    window.chrome.webview.postMessage(`DownloadModpack,${localStorage.getItem("Token")},${jsonObject.Name},${modpack.id}`);
    console.log(`DownloadModpack,${localStorage.getItem("Token")},${jsonObject.Name},${modpack.id}`);
    Page('Modpacks_Con')
}

function createModElement(modName, modAuthor, modDescription, modDownloads,RawHtmlLink,LogoImge,BigImge,mod_version,Version ,Category) {
    const modDiv = document.createElement('div');
    modDiv.className = 'Mod';
    modDiv.id = "Mod_ModPage";
    modDiv.setAttribute('data-version', Version);
    modDiv.setAttribute('data-category', Category);  
    modDiv.setAttribute('data-modName', modName);  

    const backgroundDiv = document.createElement('div');
    backgroundDiv.className = 'Mod_Background_imge';

    backgroundDiv.style.backgroundImage = `url(${BigImge})`;
    modDiv.appendChild(backgroundDiv);

    const restModDiv = document.createElement('div');
    restModDiv.className = 'rest_mod';
    restModDiv.onclick = function() {
        ModPage(RawHtmlLink,modName,modAuthor,LogoImge,BigImge,mod_version);
    };
    backgroundDiv.appendChild(restModDiv);

    const upPartDiv = document.createElement('div');
    upPartDiv.className = 'UpPartMod';
    restModDiv.appendChild(upPartDiv);

    const logoDiv = document.createElement('div');
    logoDiv.className = 'Mod_logo_imge';
    logoDiv.style.backgroundImage = `url(${LogoImge})`;
    upPartDiv.appendChild(logoDiv);

    const textBoxDiv = document.createElement('div');
    textBoxDiv.className = 'UpPartMod_text_box';
    upPartDiv.appendChild(textBoxDiv);

    const modNameH3 = document.createElement('h3');
    modNameH3.textContent = modName;
    textBoxDiv.appendChild(modNameH3);

    const modAuthorP = document.createElement('p');
    modAuthorP.textContent = `By ${modAuthor}`;
    textBoxDiv.appendChild(modAuthorP);

    const bottomPartDiv = document.createElement('div');
    bottomPartDiv.className = 'BottomPartMod';
    restModDiv.appendChild(bottomPartDiv);

    const modDescriptionP = document.createElement('p');
    const modbreak = document.createElement('br');
    modDescriptionP.className = 'p_mod_mods';

    bottomPartDiv.appendChild(modDescriptionP);
    if (modDescription.length > 100) {
        modDescriptionP.textContent =  modDescription.substring(0, 100) + "...";
    }
    else if (modDescription.length <= 48) {
        modDescriptionP.textContent =  modDescription;
        bottomPartDiv.appendChild(modbreak);
    }
    else{
        modDescriptionP.textContent =  modDescription;
    }

    const modDownloadsA = document.createElement('a');
    modDownloadsA.textContent = `${modDownloads} • Downloads • ${Version} • Version • Read More`;
    bottomPartDiv.appendChild(modDownloadsA);

    const modHolder = document.getElementById('ModHolder');
    if (modHolder) {
        modHolder.appendChild(modDiv);
    } else {
        console.error("ModHolder element not found");
    }
}

function ModPage(link,modname_t,author_t,logoimge_t,bigimge_t,mod_version){
    const myIframe = document.getElementById("iframe");
    const author = document.getElementById("Author");
    const modname = document.getElementById("ModName");
    const logoimge = document.getElementById("logoimge");
    const bigimge = document.getElementById("ModPageGridImge");

    author.textContent = "by " + author_t;
    modname.textContent = modname_t;
    logoimge.style.backgroundImage = `url(${logoimge_t})`;
    bigimge.style.backgroundImage = `url(${bigimge_t})`;

    localStorage.setItem("CurrentMod", modname_t);
    localStorage.setItem("CurrentMod_Image", logoimge_t);
    localStorage.setItem("CurrentMod_Author", author_t);
    localStorage.setItem("CurrentMod_DownloadUrl", link);
    localStorage.setItem("CurrentMod_mod_version", mod_version);

    myIframe.contentWindow.postMessage(link, '*');
    Page("ModPage");
}

function CreateModPack() {
            const name = document.getElementById("name_modpack_input");
            const url = document.getElementById("url_modpack_input");

            const message = "CreateModPack," + name.value + "," + url.value + "," + localStorage.getItem("Nick");
            const message_d = "CreateModPack," + name.value + "," + "./Assets/brmm.png," + localStorage.getItem("Nick");            
            const urlPattern = /^(http|https):\/\/[^ "]+$/;
            if(name.value === ""){
                alert("Enter modpack name");
                return;
            }

            if(url.value === ""){
                window.chrome.webview.postMessage(message_d);
            }
            else{
                window.chrome.webview.postMessage(message);

            }


            ReqModPacks();
            Page('ModPackList');
        }                            
        
        
function ReqModPacks(){
    window.chrome.webview.postMessage("GetModPacks,0");
}

function LoadModpacks(json) {

    LoadModpacks1();
    let NumModpack = 0;
            console.log(json);
            const modPackHolder = document.getElementById('Modpack_holder_modpack');
            modPackHolder.innerHTML = ''; 
            const modPackHolder1 = document.getElementById('Home_modpack_holder'); 
            modPackHolder1.innerHTML = '';
            const modPackHolder2 = document.getElementById('Modpack_holder_modpack_mod_installation'); 
            modPackHolder2.innerHTML = '';
            
            json.modPacks.forEach(modPack => {
                NumModpack += 1;
                CreateModpacksforSectionMyModpcks(modPack);
                createModpackCard(modPack);
                CreateModpacksforSectionMyModpcksINS(modPack,NumModpack);
            });
            ModPack_Lenght = NumModpack;
            NumModpack = 0;
        }
        
function InstallModToModPack() {
    const AllMessages = [];

    for (let i = 0; i < ModPack_Lenght + 1; i++) {
        const checkboxId = "ModPackModInstallation_CheckBox_" + i;
        const checkbox = document.getElementById(checkboxId);
        
        if (checkbox !== null && checkbox.checked) {
            const json = checkbox.getAttribute('data-jsoninstall');

            const message = `AddModModpack,${json},${localStorage.getItem("CurrentMod")},${localStorage.getItem("CurrentMod_Image")},${localStorage.getItem("CurrentMod_Author")},${localStorage.getItem("CurrentMod") + ".zip"},${localStorage.getItem("CurrentMod_mod_version")},${localStorage.getItem("Token")}`;
            //console.log("wewer")
            //AllMessages.push(message);
            if (!AllMessages.includes(message)) {
                AllMessages.push(message);
            }
        }
    }

    for (let i = 0; i < AllMessages.length; i++) {
        console.log(AllMessages[i]);
        window.chrome.webview.postMessage(AllMessages[i]);
    }

    AllMessages.length = 0;
    Page("Mods");
}

function createModpackCard(modPack2) {
    const modPackHolder = document.getElementById('Home_modpack_holder'); 
    const card = document.createElement('div');
    card.className = 'Home_Modpacks_card';

    const cardImage = document.createElement('div');
    cardImage.className = 'CardImge';

    const versionDiv = document.createElement('div');
    versionDiv.textContent = '1.7';

    cardImage.appendChild(versionDiv);

    const title = document.createElement('h4');
    title.textContent = modPack2.Name;

    const description = document.createElement('p');
    if (modPack2.Author.length > 14) {
        description.textContent = 'By ' + modPack2.Author.substring(0, 14) + "...";
    }
    else{
        description.textContent = 'By ' + modPack2.Author;
    }

    const button = document.createElement('button');
    button.textContent = 'Play';
    button.onclick = function() {
        loadmodsbr(modPack2.Name)

    };

    card.appendChild(cardImage);
    card.appendChild(title);
    card.appendChild(description);
    card.appendChild(button);

    modPackHolder.appendChild(card);
}

function loadmodsbr(modPack2_Name){
    window.chrome.webview.postMessage(`PlayModpack,${modPack2_Name},${localStorage.getItem("Token")}`);

    const lunching_BR = document.getElementById("lunching_BR");

    lunching_BR.style.display = "flex";
}

function LoadModpacks1(json){
    const lunching_BR = document.getElementById("lunching_BR");

    lunching_BR.style.display = "none";
}


function CreateModpacksforSectionMyModpcksINS(modPack, NumModpack){
    const modPackHolderIns = document.getElementById('Modpack_holder_modpack_mod_installation'); 
              const modPackDiv = document.createElement('div');
                modPackDiv.className = 'Modpack_div';
                const modPackStatsDiv = document.createElement('div');
                modPackStatsDiv.className = 'Modpack_div_mod_stats';
                const img = document.createElement('img');
                img.src = modPack.IconUrl;
                modPackStatsDiv.appendChild(img);
                const extraDataDiv = document.createElement('div');
                extraDataDiv.className = 'ExtraData';
                const p = document.createElement('p');
                p.textContent = modPack.Name;
                extraDataDiv.appendChild(p);
                const h5 = document.createElement('h5');
                h5.className = 'fixExtraData';
                h5.textContent = `Number of mods • ${modPack.Mods.length}`;
                extraDataDiv.appendChild(h5);
                modPackStatsDiv.appendChild(extraDataDiv);
                modPackDiv.appendChild(modPackStatsDiv);
                const deleteDiv = document.createElement('div');
                deleteDiv.className = 'delet';
                deleteDiv.innerHTML = `
                    <input type="checkbox" id="${"ModPackModInstallation_CheckBox_" + NumModpack}" data-jsoninstall="${modPack.Name}">
                `;
                modPackDiv.appendChild(deleteDiv);
                modPackHolderIns.appendChild(modPackDiv);
}

function CreateModpacksforSectionMyModpcks(modPack){
    const modPackHolder = document.getElementById('Modpack_holder_modpack');
              const modPackDiv = document.createElement('div');
                modPackDiv.className = 'Modpack_div';
                modPackDiv.onclick = function() {
                    GetAllModsForModPack(modPack);
                };
                const modPackStatsDiv = document.createElement('div');
                modPackStatsDiv.className = 'Modpack_div_mod_stats';
                const img = document.createElement('img');
                img.src = modPack.IconUrl;
                modPackStatsDiv.appendChild(img);
                const extraDataDiv = document.createElement('div');
                extraDataDiv.className = 'ExtraData';
                const p = document.createElement('p');
                p.textContent = modPack.Name;
                extraDataDiv.appendChild(p);
                const h5 = document.createElement('h5');
                h5.className = 'fixExtraData';
                h5.textContent = `Number of mods • ${modPack.Mods.length}`;
                extraDataDiv.appendChild(h5);
                modPackStatsDiv.appendChild(extraDataDiv);
                modPackDiv.appendChild(modPackStatsDiv);
                const deleteanduploadDiv = document.createElement('div');
                deleteanduploadDiv.style.display = "flex";
                const deleteDiv = document.createElement('div');
                deleteDiv.onclick = function() {
                    DeletModPack(modPack.Name, event);
                };
                deleteDiv.className = 'delet';
                deleteDiv.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#fff">
                        <path d="M253-99q-36.19 0-64.09-26.91Q161-152.82 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm104-169h74v-398h-74v398Zm173 0h75v-398h-75v398Z"/>
                    </svg>
                `;

                if(localStorage.getItem("Token") != "c0943b1a282a680c1e234f0f06c80961"){
                    const uploadDiv = document.createElement('div');
                    uploadDiv.onclick = function() {
                        UploadModpackMenu(modPack,event);
                    };
                    uploadDiv.className = 'delet';
                    uploadDiv.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#e8eaed"><path d="M440-160v-326L336-382l-56-58 200-200 200 200-56 58-104-104v326h-80ZM160-600v-120q0-33 23.5-56.5T240-800h480q33 0 56.5 23.5T800-720v120h-80v-120H240v120h-80Z"/></svg>
                    `;
                    deleteanduploadDiv.appendChild(uploadDiv);
                }
                deleteanduploadDiv.appendChild(deleteDiv);
                modPackDiv.appendChild(deleteanduploadDiv);
                modPackHolder.appendChild(modPackDiv);
}

function UploadModpackMenu(modPack,event){
    event.stopPropagation();
    Page("UploadModpacks");
    UploadModModpackPage(modPack);
}

function isValidLink(value) {
    const urlPattern = /^(https?:\/\/)/; 
    return urlPattern.test(value);
}

function UploadModpackPageManager(id){
    const Above_Modpakc_upload = document.getElementById("Above_Modpakc_upload");
    const ImageLOGOModpackUpload = document.getElementById("ImageLOGOModpackUpload").value;
    const ImageBANNERModpackUpload = document.getElementById("ImageBANNERModpackUpload").value;
    const Mod_banner_imge_upload_modpack = document.getElementById("Mod_banner_imge_upload_modpack");
    const Mod_logo_imge_upload_modpack = document.getElementById("Mod_logo_imge_upload_modpack");

    const imge_holder_modpcak_upload = document.getElementById("imge_holder_modpcak_upload");

    console.log(ImageBANNERModpackUpload);
    if(id == 1){
        Above_Modpakc_upload.style.display = 'flex';
    }
    else{
        Above_Modpakc_upload.style.display = 'none';
        if (!ImageLOGOModpackUpload) {
            console.log("Logo URL is empty.");
            Mod_logo_imge_upload_modpack.src = "./Assets/brmm.png"
        } else if (!isValidLink(ImageLOGOModpackUpload)) {
            console.log("Logo URL is not a valid link.");
        }
        else{
            Mod_logo_imge_upload_modpack.src = ImageLOGOModpackUpload;
        }

        if (!ImageBANNERModpackUpload) {
            console.log("Banner URL is empty.");
            Mod_banner_imge_upload_modpack.style.backgroundImage = `url(./Assets/brmm.png)`;
            imge_holder_modpcak_upload.style.backgroundImage = `url(./Assets/brmm.png)`;
        } else if (!isValidLink(ImageBANNERModpackUpload)) {
            console.log("Banner URL is not a valid link.");
        }
        else{
            Mod_banner_imge_upload_modpack.style.backgroundImage = `url(${ImageBANNERModpackUpload})`;
            imge_holder_modpcak_upload.style.backgroundImage = `url(${ImageBANNERModpackUpload})`;
        }
    }
}

function UploadModModpackPage(modpackData){
        const UploadModpack_text_author = document.getElementById("UploadModpack_text_author");
        const UploadModpack_text_author_sidebar = document.getElementById("UploadModpack_text_author_sidebar");
        const UploadModpack_text_modname = document.getElementById("UploadModpack_text_modname");
        const UploadModpack_text_modname_sidebar = document.getElementById("UploadModpack_text_modname_sidebar");
        const Modpacks_Mods_container = document.getElementById("Modpacks_Mods_container");
        const Upload_Button_Modpack_h4_text = document.getElementById("Upload_Button_Modpack_h4_text");

        if(localStorage.getItem(`${modpackData.Name}_upload`)){
            Upload_Button_Modpack_h4_text.textContent("Update");
        }

        const Upload_Button_Modpack = document.getElementById("Upload_Button_Modpack");
        Upload_Button_Modpack.onclick = function() {
            UploadModpack(modpackData);
        };

        UploadModpack_text_modname.textContent = `${modpackData.Name}` 
        UploadModpack_text_modname_sidebar.textContent = `${modpackData.Name}` 
        UploadModpack_text_author.textContent = `By ${modpackData.Author}` 
        UploadModpack_text_author_sidebar.textContent = `By ${modpackData.Author}` 
        Modpacks_Mods_container.innerHTML = "";
        modpackData.Mods.forEach(mod => {
            const Modpack_div = document.createElement('div');
            Modpack_div.className = 'Modpack_div';
            Modpack_div.style.width = "calc(100% - 2px)";


            const modpackDiv = document.createElement('div');
            modpackDiv.className = 'Modpack_div_mod_stats';
            const imgElement = document.createElement('img');
            imgElement.src = mod.Imge;
            imgElement.style.width = '60px';
            const extraDataDiv = document.createElement('div');
            extraDataDiv.className = 'ExtraData';
            const pElement = document.createElement('p');
            pElement.textContent = mod.Name;
            const h5Element = document.createElement('h5');
            h5Element.style.textAlign = 'left';
            h5Element.textContent = `By ${mod.Author}`;
            extraDataDiv.appendChild(pElement);
            extraDataDiv.appendChild(h5Element);
            modpackDiv.appendChild(imgElement);
            modpackDiv.appendChild(extraDataDiv);
            Modpack_div.appendChild(modpackDiv);
            Modpacks_Mods_container.appendChild(Modpack_div);
        });
        
    }


async function UploadModpack(modPack){

    const ImageLOGOModpackUpload = document.getElementById("ImageLOGOModpackUpload").value;
    const ImageBANNERModpackUpload = document.getElementById("ImageBANNERModpackUpload").value;
    const Descryption = document.getElementById("Descryption_modpack_upload").value;
    let logo_link = "";
    let banner_link = "";

    if (!ImageLOGOModpackUpload) {
            console.log("Logo URL is empty.");
            logo_link = "https://brmm.ovh/brmm.png"
        } else if (!isValidLink(ImageLOGOModpackUpload)) {
            console.log("Logo URL is not a valid link.");
        }
        else{
            logo_link = ImageLOGOModpackUpload;
        }

        if (!ImageBANNERModpackUpload) {
            console.log("Banner URL is empty.");
            banner_link = "https://brmm.ovh/brmm.png";
        } else if (!isValidLink(ImageBANNERModpackUpload)) {
            console.log("Banner URL is not a valid link.");
        }
        else{
            banner_link = ImageBANNERModpackUpload;
        }

    const response = await fetch(`${url_dev_server}/api/upload_modpack`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            token: localStorage.getItem("Token"),
            ID: localStorage.getItem("ID"),
            Author: modPack.Name,
            JSON: modPack,
            Description: Descryption,
            Banner: banner_link,
            Logo: logo_link,
            Version: '1.7',
        }),
    });

    if (response.ok) {
        const result = await response.json();
        console.log('Modpack uploaded successfully:', result);
        localStorage.setItem(`${modPack.Name}_upload`, true)
    } else {
        console.error('Failed to upload modpack:', response.status, response.statusText);
    }
    Page('ModPackList');
}

function CreateModforSectionMyModpcks(mod,modpack){
    console.log(modpack);
    const modPackHolder = document.getElementById('Modpack_holder_modpack_mod_list_of_modpack');
              const modPackDiv = document.createElement('div');
                modPackDiv.className = 'Modpack_div';
                const modPackStatsDiv = document.createElement('div');
                modPackStatsDiv.className = 'Modpack_div_mod_stats';
                const img = document.createElement('img');
                img.src = mod.Imge;
                img.style.width = '60px';

                modPackStatsDiv.appendChild(img);
                const extraDataDiv = document.createElement('div');
                extraDataDiv.className = 'ExtraData';
                const p = document.createElement('p');
                p.textContent = mod.Name;
                extraDataDiv.appendChild(p);
                const h5 = document.createElement('h5');
                h5.textContent = `By ${mod.Author}`;
                h5.style.textAlign = 'left';

                extraDataDiv.appendChild(h5);
                modPackStatsDiv.appendChild(extraDataDiv);
                modPackDiv.appendChild(modPackStatsDiv);
                const deleteDiv = document.createElement('div');
                deleteDiv.onclick = function() {
                    DeletModFromModPack(modpack,mod);
                };
                deleteDiv.className = 'delet';
                deleteDiv.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#fff">
                        <path d="M253-99q-36.19 0-64.09-26.91Q161-152.82 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm104-169h74v-398h-74v398Zm173 0h75v-398h-75v398Z"/>
                    </svg>
                `;
                modPackDiv.appendChild(deleteDiv);
                modPackHolder.appendChild(modPackDiv);
}

function GetAllModsForModPack(modpack){
    const holder = document.getElementById("Modpack_holder_modpack_mod_list_of_modpack");
    holder.innerHTML = '';

    const text = document.getElementById("ModpackNameMods");
    text.textContent = modpack.Name;

    Page("ModListModPack");
    modpack.Mods.forEach(mod => {
        CreateModforSectionMyModpcks(mod,modpack);
    });
}

function DeletModFromModPack(modpack,mod1){
    const message = `DeletModFromModPack,${modpack.Name},${mod1.Name},${mod1.Imge},${mod1.Author},${mod1.DownloadUrl},${mod1.Version}`;
    window.chrome.webview.postMessage(message);
    const modIndex = modpack.Mods.findIndex(mod => mod.Name === mod1.Name);
    if (modIndex !== -1) {
        modpack.Mods.splice(modIndex, 1);
        console.log(`Mod '${mod1.Name}' has been removed from the mod pack.`);
    } else {
        console.log(`Mod '${mod1.Name}' not found in the mod pack.`);
    }

    GetAllModsForModPack(modpack);
}

function DeletModPack(name,event){
    event.stopPropagation();
    const message = `DeleteModpack,${name}`;
    window.chrome.webview.postMessage(message);
    Page("ModPackList");
}


function Page(id) {
    const ids = ['Home', 'Mods', 'modpackpage_other', 'Modpacks_Con', 'ModPage', 'ModPackList', 'CreateModPack', 'ModPackSelected', 'AddMod', 'ModListModPack', 'UploadModpacks'];
    ReqModPacks();

    ids.forEach(pageId => {
        const element = document.getElementById(pageId);
        if (element) {
            element.style.display = 'none';
            const Above_Modpakc_upload = document.getElementById("Above_Modpakc_upload").style.display = 'none';
        }
    });

    const selectedPage = document.getElementById(id);
    if (selectedPage) {
        selectedPage.style.display = 'block';
    } else {
        console.error(`Page with id '${id}' not found.`);
    }
}

let id_imge = Math.floor(Math.random() * 10);
GalleryPage(id_imge);

function GalleryPage(id) {
    const imge = document.getElementById("RestofHome_Gallery");
    imge.style.backgroundImage = `url('./Assets/gallery/${id+1}.png')`;
}

function Search(){

    const Mods = document.getElementsByClassName("Mod");
    const modSearch = document.getElementById("modSearch").value.toLowerCase();
    const selectedCategory = document.getElementById("category").value.toLowerCase();

    for (let i = 0; i < Mods.length; i++) {
            const mod = Mods[i];
            const version = mod.getAttribute('data-version').toLowerCase();
            const category = mod.getAttribute('data-category').toLowerCase();
            const modName = mod.getAttribute('data-modName').toLowerCase();

            if (modName.includes(modSearch)) {
                console.log('Match found!');
            } else {
                console.log('No match.');
            }

            for (const mod of Mods) {
                const nameMatches = modName.includes(modSearch);
                const categoryMatches = selectedCategory === "" || category === selectedCategory;


                if(selectedCategory == "all"){
                    if (nameMatches) {
                        mod.style.display = 'block'; 
                    } else {
                        mod.style.display = 'none'; 
                    }
                }
                else if (nameMatches && categoryMatches) {
                    mod.style.display = 'block'; 
                } else {
                    mod.style.display = 'none'; 
                }


            }

            console.log(`Mod Name: ${modName}, Version: ${version}, Category: ${category}`);
        }
}
</script>